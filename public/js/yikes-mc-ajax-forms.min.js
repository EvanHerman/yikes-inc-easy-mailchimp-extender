window.Yikes_Mailchimp_Ajax=window.Yikes_Mailchimp_Ajax||{},function(e,i,s,r,a){"use strict";r.l10n=e.yikes_mailchimp_ajax||{},s(i).ready(function(){s("body").on("submit",".yikes-easy-mc-form",function(){var e=s(this);e.addClass("yikes-mc-submitted-form-loading"),e.find("input, label, button").not(":hidden").fadeTo("fast",.5),"string"==typeof r.l10n.preloader_url&&r.l10n.preloader_url.length>1&&e.append('<img src="'+r.l10n.preloader_url+'" class="yikes-mailchimp-preloader" />'),s(".yikes-mc-required-field-not-filled").removeClass("yikes-mc-required-field-not-filled"),s(".yikes-mailchimp-submit-button-span-text").hide(),"string"==typeof r.l10n.loading_dots&&r.l10n.loading_dots.length>1&&e.find(".yikes-easy-mc-submit-button").append('<img src="'+r.l10n.loading_dots+'" class="loading-dots yikes-mc-loading-dots" />');var i=e.attr("data-attr-form-id"),a=[];if(e.find(".yikes-interest-group-required").length>0&&e.find(".yikes-interest-group-required").each(function(){var i=jQuery(this).attr("name").replace("[]","");0==e.find('input[name="'+i+'[]"]:checked').length&&(a[i]=e.find("span."+i+"-label").text())}),a.length>0){if(e.find(".yikes-mailchimp-required-interest-group-error").length>0)e.find(".yikes-mailchimp-required-interest-group-error").fadeOut("fast",function(){for(var i in e.find(".yikes-mailchimp-required-interest-group-error").remove(),a)e.find("span."+i+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+r.l10n.interest_group_checkbox_error+"</p>")});else for(var n in a)e.find("span."+n+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+r.l10n.interest_group_checkbox_error+"</p>");return e.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled"),e.find("input, label, button").not(":hidden").fadeTo("fast",1),e.find(".yikes-mailchimp-preloader").remove(),s(".yikes-mc-loading-dots").remove(),s(".yikes-mailchimp-submit-button-span-text").show(),e.removeClass("yikes-mc-submitted-form-loading"),!1}e.find(".yikes-easy-mc-submit-button").attr("disabled","disabled"),s(".yikes-easy-mc-error-message").remove(),s(".yikes-easy-mc-success-message").remove();var t={action:"process_form_submission",form_data:e.serialize(),form_id:i,page_data:r.l10n.page_data,ajax_security_nonce:r.l10n.ajax_security_nonce};return s.ajax({url:r.l10n.ajax_url,type:"POST",data:t,success:function(a,n,t){if(e.find("input, label, button").not(":hidden").fadeTo("fast",1),e.find(".yikes-mailchimp-preloader").remove(),s(".yikes-mc-loading-dots").remove(),s(".yikes-mailchimp-submit-button-span-text").show(),e.removeClass("yikes-mc-submitted-form-loading"),e.trigger("yikes_mailchimp_ajax_submission",a),a.success){a=a.data,"function"==typeof yikes_mailchimp_google_analytics_success&&yikes_mailchimp_google_analytics_success(a),1==a.hide&&(s(".yikes-easy-mc-form-description-"+i).length>0&&s(".yikes-easy-mc-form-description-"+i).hide(),e.hide()),s(".yikes-easy-mc-form-description-"+i).length>0?s(".yikes-easy-mc-form-description-"+i).before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+i+' yikes-easy-mc-hidden">'+a.response+"</p>"):e.before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+i+' yikes-easy-mc-hidden">'+a.response+"</p>"),s(".yikes-easy-mc-success-message-"+i).fadeIn(),s(".yikes-mailchimp-required-interest-group-error").remove(),1===a.redirection&&yikes_mc_redirect_after_submission(a.redirect,a.redirect_timer,a.new_window),e.trigger("yikes_clear_input_fields_after_successful_submission"),e.find("input").not('.yikes-easy-mc-submit-button, input[type="radio"], input[type="select"], input[type="checkbox"], input[name="yikes-mailchimp-associated-list-id"], input[name="yikes-mailchimp-submitted-form"]').val("");var o={action:"increase_submission_count",form_id:i};s.ajax({url:r.l10n.ajax_url,type:"POST",data:o,success:function(e,i,s){},error:function(e,i,s){console.error(s)}})}else{if(a=a.data,"function"==typeof yikes_mailchimp_google_analytics_failure&&yikes_mailchimp_google_analytics_failure(a),s(".yikes-easy-mc-form-description-"+i).length>0)s(".yikes-easy-mc-form-description-"+i).before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+i+'" yikes-easy-mc-hidden"> '+a.response+"</p>");else{var d=void 0!==a&&void 0!==a.response?a.response:"Error collecting the API response.";e.before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+i+' yikes-easy-mc-hidden">'+d+"</p>")}if(void 0!==a&&void 0!==a.missing_required_field&&!0===a.missing_required_field)if(void 0!==a.missing_required_field_data)!function(e,i){void 0!==e&&s.each(e,function(e,r){!0===i?s("span."+e+"-label").length>0?s("span."+e+"-label").addClass("yikes-mc-required-field-not-filled"):s("."+e+"-label").addClass("yikes-mc-required-field-not-filled"):s('label[for="'+e+'"]').children("input").addClass("yikes-mc-required-field-not-filled")})}(a.missing_required_field_data,void 0!==a.is_interest_group&&a.is_interest_group);s(".yikes-easy-mc-error-message").fadeIn()}},error:function(e,i,s){console.error(s),console.log(e),console.log(i)},complete:function(i,s){e.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled")}}),!1})})}(window,document,jQuery,Yikes_Mailchimp_Ajax);